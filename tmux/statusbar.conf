# ============================================================================
# Zellij-like Status Bar Configuration
# ============================================================================

# Enable status bar
set -g status on

# Status bar position (top)
set -g status-position top

# Status bar update interval
set -g status-interval 0

# Status bar colors (Zellij-inspired dark theme)
# Background matches active pane for seamless look
set -g status-style "fg=colour244,bg=colour0"

# Status bar left side (session name)
set -g status-left-length 50
set -g status-left "#[fg=colour51,bold] üñ•Ô∏è  #[fg=colour51,bold]#S"

# Status bar right side (network, battery graph, CPU bar, time, date with nerdfont icons)
# Include prefix-highlight if plugin is installed
set -g status-right-length 200

# Status right with battery (uses tmux-battery plugin if available)
# Conditionally show lock icon (when @lock_mode=1) or prefix indicator
# If running under WSL, use a small helper script to query Windows battery via PowerShell
if-shell '[ -n "\$(grep -i microsoft /proc/version 2>/dev/null || true)" ]' \
	"set -g status-right '#{?@lock_mode,#[fg=colour208]üîí,#{prefix_highlight}}#[fg=colour244] üí° #[fg=colour220]Ctrl+a ? #[fg=colour244] üîã #(bash ~/.config/tmux/scripts/wsl-battery.sh 2>/dev/null) #[fg=colour244] ‚è∞ #[fg=colour51]%H:%M #[fg=colour244] üìÖ #[fg=colour51]%d %b %Y'" \
	"set -g status-right '#{?@lock_mode,#[fg=colour208]üîí,#{prefix_highlight}}#[fg=colour244] üí° #[fg=colour220]Ctrl+a ? #[fg=colour244] üîã #{battery_color_charge_bg}#{battery_color_charge_fg}#{battery_graph}#[default] #{battery_icon_status} #[fg=colour51]#{battery_percentage} #[fg=colour244] ‚è∞ #[fg=colour51]%H:%M #[fg=colour244] üìÖ #[fg=colour51]%d %b %Y'"

# Window status format (Zellij-like tabs with dividers)
# The divider is part of each tab to create a continuous look
# Inactive tabs: gray background with dark text for better contrast
# Show window index, plus window name if manually set (not blank)
# Format: "1" if no name, "1: name" if renamed
setw -g window-status-format "#[fg=colour235,bg=colour244]ÓÇ∞#[fg=colour232,bg=colour244,bold] #I#{?#{window_name},: #W,:} #[fg=colour244,bg=colour235]ÓÇ∞"
# Active tab: bright green background with black text, divider at the end
setw -g window-status-current-format "#[fg=colour235,bg=colour46]ÓÇ∞#[fg=colour0,bg=colour46,bold] #I#{?#{window_name},: #W,:} #[fg=colour46,bg=colour235]ÓÇ∞"

# Window status separator (empty, chevron is part of tab format)
setw -g window-status-separator ""

# Activity and bell notifications (these styles apply to window-status-format)
# Activity indicator will show in the window status when there's activity
setw -g window-status-activity-style "fg=colour0,bg=colour46"
# Bell indicator will show in the window status when there's a bell
setw -g window-status-bell-style "fg=colour0,bg=colour5"

# Message style
set -g message-style "fg=colour231,bg=colour238"

# Mode style (when in a mode)
setw -g mode-style "fg=colour51,bg=colour238,bold"

# Pane number display
set -g display-panes-colour colour51
set -g display-panes-active-colour colour231

# Clock mode style
setw -g clock-mode-colour colour51

# ============================================================================
# Window/Pane Background Colors
# ============================================================================
# Use terminal's color palette
# Active pane: black (terminal default background color)
# Inactive panes: darker background (dimmer gray) for visual distinction
setw -g window-style "fg=default,bg=colour234"
setw -g window-active-style "fg=default,bg=colour0"

# ============================================================================
# Optional: Minimal status bar (uncomment for ultra-minimal look)
# ============================================================================

# set -g status-left ""
# set -g status-right ""
# setw -g window-status-format "#[fg=colour244]#I"
# setw -g window-status-current-format "#[fg=colour51,bold]#I"

